# **Microphone, Speaker and Camera Detailed Design**

## **Function of the subsystem**

The function of the Microphone, Speaker, and Camera subsystem is to integrate a microphone, speaker, and two cameras onto a drone, all connected to a Jetson Nano. The design includes signal processing on the Jetson Nano to eliminate propeller noise captured by the microphone, ensuring clear audio transmission. Additionally, the speaker and cameras facilitate communication and video streaming. The Jetson Nano will work with both the microphone filtering subsystem and the signal processing. Therefore, using efficient coding algorithms is imperative to conserve the drone’s battery.
## **Specifications**
1.	The microphone shall capture audio in the frequency range of 100–4,000 Hz, emphasizing human speech intelligibility, while suppressing broadband drone and wind noise.
2.	The speaker shall support frequencies from 300 Hz to 3.4 kHz for effective human voice transmission.
3.	The speaker shall produce sufficient output power to enable clear communication at distances up to 5 meters.
4.	The speaker shall provide intelligible audio output despite interference from drone noise.
5.	The camera shall provide a minimum resolution of 720p for clear and detailed video capture.
6.	The camera shall operate at a minimum of 30 frames per second (fps) to ensure smooth video playback.
7.	The camera shall have a wide field of view sufficient to capture subjects while compensating for drone motion.
8.	All components shall operate within the power limits of 22v auxiliary power to ensure sustained operation.
   
**Constraints**
1.	The combined weight of the microphone, speaker, and cameras shall not exceed the payload capacity of the drone of 3.3 lbs.
2.	All components shall operate reliably in outdoor environments, including exposure to wind and moderate temperature fluctuations.
3.	The microphone, speaker, and cameras shall not cause interference with each other or with other electronic components on the drone.

## **Overview of Proposed Solution**

**Microphone**
The microphone mounted on the drone will capture ambient audio, including both external sounds and noise generated by the propellers and motors. The audio signal will then be transmitted to the Jetson Nano for real-time digital signal processing. Due to the broadband and time-varying nature of propeller noise, a multi-stage software-based filtering approach is employed. A fixed band-pass filter is used to preserve the primary speech frequency range, while adaptive notch filters are applied to attenuate dominant spectral peak frequencies corresponding to the propeller blades its harmonics. These notch filter center frequencies are updated based on short-time spectral analysis of the microphone signal, allowing the system to track RPM variations during hover and adjust accordingly. Additionally, the microphone is housed in a wind-shielded enclosure to reduce wind-induced noise and directional interference prior to digital processing.

**Speaker**

The speaker on the drone transmits audio from the Jetson Nano, enabling two-way communication. This allows the drone to relay instructions, alerts, or other audio signals to the operator or nearby individuals. To prevent acoustic feedback, the microphone and speaker are configured to operate inversely, ensuring that only one component is active at any given time.

**Digital Cameras**

The drone will be equipped with digital cameras that provide real-time video footage. These cameras allow for visual monitoring of the drone’s surroundings, which is essential for navigation, obstacle avoidance, and ensuring safe operation during flight.
The two digital cameras being added for real-time video streaming for the reasons specified below:
•	Camera 1: Front-facing for navigation.
•	Camera 2: Downward-facing for inspection and monitoring.

**Jetson Nano**

The Jetson Nano will control all signal processing through a Python script, communicating with each component in the system. The primary objective is to allow the user to easily toggle between the microphone and speaker via an interface subsystem, ensuring that only one is active at a time. Audio signals will be processed real time using the Python script running on the Jetson and will use a fixed sampling rate to dynamically update the center frequencies of notch filters to suppress propeller-related spectral components while preserving speech intelligibility.

## **Flow Chart**

<img width="690" height="1093" alt="image" src="https://github.com/user-attachments/assets/6eb8b7a3-3ac9-473b-bb53-fe352938cf7f" />

## **Schematics**

![Jetson Orin Nano Board Layout (Top)](https://raw.githubusercontent.com/TnTech-ECE/F25_Team8_DARPAChallengeTriageDrone/main/Reports/Detailed%20Design/Jetson-Orin-Nano-board-layout-top.jpg)


**Port Configuration**

•	J20: Camera 1 (forward facing)

•	J21: Camera 2 (downward facing)

•	J7: Microphone

•	J6: Speaker 1, Speaker 2


## **Notch Filter**

The initial approach to filtering the microphone signal involved designing a notch filter in MATLAB to understand its transfer function. The objective was to isolate and remove unwanted noise at specific frequencies. However, after further evaluation, it was decided to transition to a software-based solution by programming the filter in Python. This shift was motivated by cost-effectiveness, as it required fewer physical components, and provided greater flexibility for real-time signal processing on the Jetson Nano. By implementing the filter in software, the same results could be achieved without additional hardware, making the solution more efficient and manageable for the drone’s system. 

Propeller noise manifests as narrowband spectral peaks at the blade-pass frequency and its harmonics, which vary with motor RPM. Rather than applying a broad low-pass filter, short-time spectral analysis is performed on the microphone signal to identify dominant-frequency peaks associated with propeller rotation. Narrow notch filters are then centered at these peak frequencies to selectively attenuate blade-related noise while preserving the broadband characteristics of human speech. A sampling rate and frame size will be selected to capture microphone sample output from. From there we can calculate the frequency resolution. Using the sampled data and frequency resolution, the FFT (Fast Fourier Transform) is computed to obtain the magnitude spectrum for each frequency bin using the Discrete Fourier Transform equation shown below.

$$
X[k] = \sum_{n=0}^{7} x[n]\, e^{-j \frac{2\pi k n}{8}}
$$

Once that is calculated, we are able to calculate exact values for the filter. The exact filter values will be calculated using the peak frequency in a standard notch filter equation like the one shown below.

$$
H(z) = \frac{1 - 2r\cos(\omega_0)\, z^{-1} + r^2 z^{-2}}
            {1 - 2\cos(\omega_0)\, z^{-1} + z^{-2}}
$$

The center frequencies of the notch filters are dynamically updated on a frame-by-frame basis to account for slow RPM variations during hover, enabling effective suppression of time-varying propeller noise. This software-based approach eliminates the need for additional hardware, provides flexibility in filter tuning, and allows the noise mitigation strategy to adapt in real time to changing flight conditions.

## **Before and after images of Filter implementation**

<p align="center">
  <img src="https://raw.githubusercontent.com/TnTech-ECE/F25_Team8_DARPAChallengeTriageDrone/main/Reports/Detailed%20Design/frequency%20spectrum.png" width="45%" />
  <img src="https://raw.githubusercontent.com/TnTech-ECE/F25_Team8_DARPAChallengeTriageDrone/main/Reports/Detailed%20Design/frequency%20specrum%20with%20filter.png" width="45%" />
</p>

<p align="center">
  <b>(a)</b> Original Frequency Spectrum &nbsp;&nbsp;&nbsp;&nbsp;
  <b>(b)</b> Frequency Spectrum After Filtering
</p>




## **Attaching components to the drone**

The Jetson Nano, along with the two cameras, speaker, and microphone, will be mounted on the drone using custom 3D-printed brackets designed for lightweight support. The 3D-printed parts will have low infill to reduce overall weight while maintaining structural integrity. The two cameras will be attached using 3D-printed mounts, with Camera 1 positioned at the front for forward vision and Camera 2 is positioned downward to assist with sensor alignment during triage measurements. The microphone will be positioned away from the propellers and motors and inside a wind shielded enclosure with a slot at the bottom to minimize interference and unwanted noise. The speaker will be mounted near the lower part of the drone to ensure clear audio projection. Wiring will be neatly routed along the frame, secured with cable ties, to prevent loose connections and interference while keeping the system lightweight and efficient.

## **BOM**

## **BOM**

| PART NUMBER  | DESCRIPTION          | LINK | MANUFACTURER NAME | QUANTITY | COST PER ITEM | TOTAL COST |
|--------------|----------------------|------|-------------------|----------|---------------|------------|
| B08T74F3WB   | Cameras              | [Amazon: Cameras](https://www.amazon.com/Yahboom-IMX219-160%C2%B0FOV-Compatible-120%C2%B0Camera/dp/B0C584LT6F/ref=sr_1_9?th=1) | Yahboom | 2 | $24.99 | $49.98 |
| B07D29L3Q1   | Microphone           | [Amazon: Microphone](https://www.amazon.com/Seeed-Studio-ReSpeaker-Microphones-XVF-3000/dp/B07D29L3Q1/ref=sr_1_1) | ReSpeaker | 1 | $119.99 | $119.99 |
| B0B4D1BN4F   | 4 PCS Speaker 3W 8Ω  | [Amazon: Speaker](https://www.amazon.com/Loundspeaker-JST-PH2-0-Interface-Electronic-Advertising/dp/B0B4D1BN4F/ref=sr_1_5?th=1) | HANXI01 | 1 | $9.99 | $0.00* |
|              | **TOTAL**            |      |                   |          |               | **$169.97** |



## **Analysis**
The Microphone, Speaker, and Camera subsystem is designed to provide reliable audio communication and visual feedback while operating within the strict power, weight, and environmental constraints of a drone platform. The microphone captures ambient audio containing both human speech and propeller-induced noise. To preserve speech intelligibility, the Jetson Nano performs real-time digital signal processing using a fixed band-pass filter combined with dynamically updated notch filters. These notch filters are centered on dominant spectral peaks associated with propeller blade-pass frequencies and their harmonics, allowing selective attenuation of motor noise while preserving the primary speech frequency range. The microphone is further isolated using a wind-shielded enclosure, which reduces wind-induced and directional noise prior to digital processing and improves overall signal quality.

The dual-camera configuration provides complementary visual perspectives essential for flight operations. The forward-facing camera supports navigation and situational awareness, while the downward-facing camera enables inspection and monitoring tasks. Both cameras operate at a minimum of 720p resolution and 30 fps, ensuring sufficient visual clarity while balancing computational load on the Jetson Nano. The ability to toggle camera operation through the interface subsystem allows unnecessary video streams to be disabled when not required, reducing power consumption and extending flight time.

Audio output is provided by two 3 W, 8 Ω speakers selected to meet the system’s communication requirements while minimizing weight, power draw, and electrical complexity. The speakers are optimized for mid-frequency output corresponding to the human voice range, improving speech intelligibility in short-range outdoor environments. Using two speakers provides improved acoustic coverage and redundancy without significantly increasing system mass or power demand. This configuration is sufficient to support intelligible communication at distances up to 5 meters, consistent with the project specifications, while remaining compatible with the drone’s auxiliary power and payload limitations. To prevent acoustic feedback and interference, the microphone and speaker are operated inversely, ensuring that only one is active at any given time.

The Jetson Nano serves as the central processing unit, coordinating audio signal processing, camera data handling, and interface control through a Python-based software framework. Sampling rates, frame sizes, and filter parameters are selected to balance real-time performance with computational efficiency, conserving battery power while maintaining audio and video quality. All components are mounted using custom 3D-printed brackets with low infill and vibration-dampening features, ensuring secure attachment, minimal added weight, and reduced mechanical coupling between subsystems. Together, these design choices result in a robust, efficient subsystem capable of meeting the project’s functional and environmental requirements.

## **References**

[1].https://electricala2z.com/electrical-circuits/low-pass-and-high-pass-filter-frequency-response/

[2].https://courses.grainger.illinois.edu/ece401/fa2021/lectures/lec25.pdf

[3].https://www.electrical4u.com/band-stop-notch-filter/

[4].https://developer.nvidia.com/embedded/learn/jetson-nano-2gb-devkit-user-guide

[5].https://www.electronics-tutorials.ws/filter/band-stop-filter.html

[6].https://www.knowles.com/docs/default-source/default-document-library/an29-protecting-microphones-from-wind-noise-pickup.pdf?sfvrsn=39dc73b1_4

[7].https://muneebsa.medium.com/deep-learning-101-lesson-23-the-basics-of-audio-signal-processing-with-fft-ffef65689c1d

[8].https://www.numberanalytics.com/blog/ultimate-guide-bandpass-filter-dsp
